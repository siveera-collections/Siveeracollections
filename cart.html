<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart | Siveera Collections</title>

  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        crossorigin="anonymous" />

  <style>
.cart-wrapper {
  max-width: 1100px;
  margin: 100px auto 60px;
  padding: 20px;
}

.cart-title {
  font-size: 2rem;
  font-weight: 700;
  color: #C07C85;
  margin-bottom: 25px;
  text-align:center;
}

.cart-box {
  background:#FFF7F2;
  padding: 25px;
  border-radius: 12px;
  border:1px solid #E8C4A9;
  box-shadow:0 0 20px rgba(214,109,143,0.15);
}

.cart-item {
  display:flex;
  gap:15px;
  padding:15px;
  border-bottom:1px solid #F5D9CA;
  margin-bottom:10px;
}
.cart-item img {
  width:80px; height:80px; border-radius:10px;
  object-fit:cover;
}
.cart-item div { flex:1; }

.cart-controls {
  display:flex;
  gap:8px;
  align-items:center;
}
.cart-controls button {
  border:none; background:#eee;
  padding:8px 12px;
  border-radius:6px; cursor:pointer;
  font-size:16px;
}
.remove-btn { background:#ff4d4d!important; color:white; }

/* Summary */
.cart-summary {
  margin-top:25px;
  text-align:center;
  background:white;
  padding:25px;
  border-radius:15px;
  border:1px solid #F2C9B3;
}
.cart-summary h3 {
  color:#C07C85;
  font-size:1.4rem;
  margin-bottom:18px;
}
.btn-pill {
  display:inline-block;
  padding:12px 35px;
  border-radius:50px;
  background:linear-gradient(135deg,#E8C4A9,#D66D8F);
  color:white; font-weight:700;
  text-decoration:none;
  font-size:1.15rem;
  margin:10px;
}

/* Billing & Payment */
form input {
  width:100%;
  padding:14px 18px;
  border-radius:10px;
  border:1px solid #E8C4A9;
  margin:8px 0;
}

/* Empty cart design */
.empty-cart {
  text-align:center;
  padding:60px 10px;
}
.empty-cart i {
  font-size:4rem;
  color:#D66D8F;
  margin-bottom:15px;
}

  </style>
</head>
<body>

<!-- Header -->
<div id="header-placeholder"></div>
<script>
fetch("header.html").then(r=>r.text()).then(d=>document.getElementById("header-placeholder").innerHTML=d);
</script>

<div class="cart-wrapper">
  <h1 class="cart-title">Your Cart</h1>

  <div class="cart-box" id="cart-display"></div>

  <div class="cart-summary" id="summary-box" style="display:none;">
    <h3>Order Summary</h3>
    <p id="summary-total" style="font-size:1.3rem;font-weight:700;"></p>

    <button class="btn-pill" onclick="showBilling()">Continue to Checkout</button>
    <a href="shop.html" class="btn-pill" style="background:#C07C85;">Continue Shopping</a>
  </div>

  <!-- Billing Form -->
  <div id="billing-form" style="display:none;" class="cart-box">
    <h2 style="text-align:center;color:#C07C85;">Billing Details</h2>
    <form onsubmit="showPayment(event)">
      <input id="name" type="text" placeholder="Full Name" required>
      <input id="address" type="text" placeholder="Full Address" required>
      <input id="phone" type="tel" placeholder="Mobile Number" required>
      <input id="email" type="email" placeholder="Email Address">
      <button class="btn-pill" type="submit">Next</button>
    </form>
  </div>

  <!-- Payment -->
  <div id="payment-form" style="display:none;" class="cart-box">
    <h2 style="text-align:center;color:#C07C85;">Payment</h2>
    <p style="text-align:center;">Scan the QR code below to pay</p>
    <img src="siveerapayments.jpg" style="display:block;margin:auto;width:200px;border-radius:12px;">
    <br>
    <button onclick="confirmOrder()" class="btn-pill" style="background:#4CAF50;">Confirm Payment</button>
    <a class="btn-pill whatsapp-btn" style="background:#25D366;"
       href="#" id="whatsappLink" target="_blank">Upload Screenshot & Confirm</a>
    <p id="doneMsg" style="margin-top:15px;text-align:center;color:#4CAF50;font-weight:700;"></p>
  </div>

</div>

<script>
let cartItems = JSON.parse(localStorage.getItem("cartItems")||"[]");

function showCart(){
  const box=document.getElementById("cart-display");
  const sumBox=document.getElementById("summary-box");

  if(cartItems.length===0){
    box.innerHTML=`
      <div class='empty-cart'>
        <i class="fa-solid fa-bag-shopping"></i>
        <h2>Cart is Empty</h2>
        <a href="shop.html" class="btn-pill">Shop Now</a>
      </div>`;
    sumBox.style.display="none";
    return;
  }

  sumBox.style.display="block";
  let total=0;
  box.innerHTML="";
  cartItems.forEach((i,index)=>{
    total+=i.price*i.quantity;
    box.innerHTML += `
      <div class="cart-item">
        <img src="${i.image}">
        <div><b>${i.name}</b><br>‚Çπ${i.price} √ó ${i.quantity}</div>
        <div class="cart-controls">
          <button onclick="dec(${index})">-</button>
          <button onclick="inc(${index})">+</button>
          <button class="remove-btn" onclick="del(${index})">x</button>
        </div>
      </div>
    `;
  });

  document.getElementById("summary-total").innerText = "Total Amount: ‚Çπ" + total;
}

function save(){ localStorage.setItem("cartItems",JSON.stringify(cartItems)); showCart(); }
function inc(i){ cartItems[i].quantity++; save(); }
function dec(i){ cartItems[i].quantity>1? cartItems[i].quantity-- : cartItems.splice(i,1); save(); }
function del(i){ cartItems.splice(i,1); save(); }

function showBilling(){
  document.getElementById("billing-form").style.display="block";
  window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});
}

function showPayment(e){
  e.preventDefault();
  document.getElementById("billing-form").style.display="none";
  document.getElementById("payment-form").style.display="block";
  window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});
}

function confirmOrder(){
  const n=document.getElementById("name").value;
  const ad=document.getElementById("address").value;
  const p=document.getElementById("phone").value;
  const total = cartItems.reduce((s,i)=>s+i.price*i.quantity,0);

  const summary = cartItems.map(i=>`${i.name} - ‚Çπ${i.price} √ó ${i.quantity}`).join('%0A');

  const msg = `üõç *Order Details*%0A%0Aüë§ Name: ${n}%0Aüè° Address: ${ad}%0Aüìû Phone: ${p}%0A%0Aüßæ Items:%0A${summary}%0A%0Aüí∞ Total: ‚Çπ${total}`;

  document.getElementById("whatsappLink").href=`https://wa.me/919966191975?text=${msg}`;
  document.getElementById("doneMsg").innerText = "Order Submitted! Upload payment screenshot.";
  cartItems=[];
  localStorage.removeItem("cartItems");
}
document.addEventListener("DOMContentLoaded",showCart);
</script>

</body>
</html>
